(()=>{"use strict";var e={6547:(e,t,l)=>{var a=l(3751),s=l(4307),o=(l(4188),l(641));const r={class:"app-container"},i={class:"header-content"},d={class:"user-info"},n={class:"user-dropdown"};function u(e,t,l,a,s,u){const c=(0,o.g2)("el-menu-item"),m=(0,o.g2)("el-menu"),k=(0,o.g2)("arrow-down"),p=(0,o.g2)("el-icon"),h=(0,o.g2)("el-dropdown-item"),f=(0,o.g2)("el-dropdown-menu"),g=(0,o.g2)("el-dropdown"),b=(0,o.g2)("el-header"),v=(0,o.g2)("router-view"),_=(0,o.g2)("el-main"),F=(0,o.g2)("el-footer"),y=(0,o.g2)("el-container");return(0,o.uX)(),(0,o.CE)("div",r,[(0,o.bF)(y,null,{default:(0,o.k6)((()=>[(0,o.bF)(b,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",i,[t[5]||(t[5]=(0,o.Lk)("div",{class:"logo"},[(0,o.Lk)("h1",null,"LLM评测系统")],-1)),(0,o.bF)(m,{mode:"horizontal",router:!0,"default-active":u.activeMenu},{default:(0,o.k6)((()=>[(0,o.bF)(c,{index:"/"},{default:(0,o.k6)((()=>t[0]||(t[0]=[(0,o.eW)("首页")]))),_:1}),(0,o.bF)(c,{index:"/tasks"},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("评测任务")]))),_:1})])),_:1},8,["default-active"]),(0,o.Lk)("div",d,[(0,o.bF)(g,null,{dropdown:(0,o.k6)((()=>[(0,o.bF)(f,null,{default:(0,o.k6)((()=>[(0,o.bF)(h,null,{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)("个人设置")]))),_:1}),(0,o.bF)(h,null,{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)("退出登录")]))),_:1})])),_:1})])),default:(0,o.k6)((()=>[(0,o.Lk)("span",n,[t[2]||(t[2]=(0,o.eW)(" 管理员 ")),(0,o.bF)(p,null,{default:(0,o.k6)((()=>[(0,o.bF)(k)])),_:1})])])),_:1})])])])),_:1}),(0,o.bF)(_,null,{default:(0,o.k6)((()=>[(0,o.bF)(v,null,{default:(0,o.k6)((({Component:e})=>[((0,o.uX)(),(0,o.Wv)(o.PR,null,[((0,o.uX)(),(0,o.Wv)((0,o.$y)(e)))],1024))])),_:1})])),_:1}),(0,o.bF)(F,null,{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.Lk)("div",{class:"footer-content"},[(0,o.Lk)("p",null,"© 2025 LLM评测系统 - 基于Django和Vue.js构建")],-1)]))),_:1})])),_:1})])}var c=l(8548);const m={name:"App",components:{ArrowDown:c.yd$},computed:{activeMenu(){return this.$route.path}}};var k=l(6262);const p=(0,k.A)(m,[["render",u]]),h=p;var f=l(5220),g=l(33);const b={class:"task-list-container"},v={class:"header-actions"},_={class:"left-actions"};function F(e,t,l,a,s,r){const i=(0,o.g2)("el-button"),d=(0,o.g2)("router-link"),n=(0,o.g2)("el-table-column"),u=(0,o.g2)("el-tag"),c=(0,o.g2)("el-table"),m=(0,o.g2)("el-pagination"),k=(0,o.g2)("create-task-form"),p=(0,o.g2)("el-dialog"),h=(0,o.g2)("task-results"),f=(0,o.gN)("loading");return(0,o.uX)(),(0,o.CE)("div",b,[(0,o.Lk)("div",v,[(0,o.Lk)("div",_,[t[2]||(t[2]=(0,o.Lk)("h2",null,"任务列表",-1)),(0,o.bF)(i,{circle:"",icon:"Refresh",onClick:r.fetchTasks,loading:e.loading,title:"刷新任务列表"},null,8,["onClick","loading"])]),(0,o.bF)(d,{to:"/create-task"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{type:"primary"},{default:(0,o.k6)((()=>t[3]||(t[3]=[(0,o.eW)("创建评测任务")]))),_:1})])),_:1})]),(0,o.bo)(((0,o.uX)(),(0,o.Wv)(c,{data:s.tasks,style:{width:"100%"}},{default:(0,o.k6)((()=>[(0,o.bF)(n,{prop:"name",label:"任务名称",width:"250"}),(0,o.bF)(n,{label:"评测模型",width:"250"},{default:(0,o.k6)((e=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.row.models,(e=>((0,o.uX)(),(0,o.CE)("div",{key:e.id},(0,g.v_)(e.provider_name)+"-"+(0,g.v_)(e.model_name),1)))),128))])),_:1}),(0,o.bF)(n,{prop:"eval_type",label:"评测方式",width:"120"},{default:(0,o.k6)((e=>[(0,o.eW)((0,g.v_)("single"===e.row.eval_type?"单个评测":"对比评测"),1)])),_:1}),(0,o.bF)(n,{prop:"status",label:"评测状态",width:"120"},{default:(0,o.k6)((e=>[(0,o.bF)(u,{type:r.getStatusType(e.row.status)},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(r.getStatusText(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),(0,o.bF)(n,{prop:"created_at",label:"创建时间",width:"180"}),(0,o.bF)(n,{label:"操作"},{default:(0,o.k6)((e=>[(0,o.bF)(i,{type:"primary",size:"small",onClick:t=>r.viewResults(e.row)},{default:(0,o.k6)((()=>t[4]||(t[4]=[(0,o.eW)("结果")]))),_:2},1032,["onClick"]),(0,o.bF)(i,{type:"info",size:"small",onClick:t=>r.stopTask(e.row),disabled:"running"!==e.row.status},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.eW)("终止")]))),_:2},1032,["onClick","disabled"]),(0,o.bF)(i,{type:"danger",size:"small",onClick:t=>r.deleteTask(e.row)},{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("删除")]))),_:2},1032,["onClick"]),(0,o.bF)(i,{type:"success",size:"small",onClick:t=>r.downloadResults(e.row),disabled:!e.row.result_file},{default:(0,o.k6)((()=>t[7]||(t[7]=[(0,o.eW)("下载")]))),_:2},1032,["onClick","disabled"])])),_:1})])),_:1},8,["data"])),[[f,e.loading]]),(0,o.bF)(m,{onCurrentChange:r.handleCurrentChange,"current-page":s.currentPage,"page-size":s.pageSize,layout:"prev, pager, next",total:s.totalTasks},null,8,["onCurrentChange","current-page","page-size","total"]),(0,o.bF)(p,{title:"创建评测任务",modelValue:s.createTaskDialogVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>s.createTaskDialogVisible=e),width:"50%"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{onTaskCreated:r.onTaskCreated},null,8,["onTaskCreated"])])),_:1},8,["modelValue"]),(0,o.bF)(p,{title:"评测结果",modelValue:s.resultDialogVisible,"onUpdate:modelValue":t[1]||(t[1]=e=>s.resultDialogVisible=e),width:"70%"},{default:(0,o.k6)((()=>[s.selectedTask?((0,o.uX)(),(0,o.Wv)(h,{key:0,task:s.selectedTask},null,8,["task"])):(0,o.Q3)("",!0)])),_:1},8,["modelValue"])])}var y=l(2505),w=l.n(y);const C={class:"create-task-container"},T={class:"header-actions"},V={class:"char-count"},L={key:0,class:"selected-models"},W={class:"model-count"},D={class:"model-selection-tabs"},$={class:"provider-filter"},x={class:"model-count-info"},M={class:"model-list"},E={class:"model-items"},R={class:"model-description"},S={class:"dialog-footer"};function X(e,t,l,a,s,r){const i=(0,o.g2)("el-button"),d=(0,o.g2)("router-link"),n=(0,o.g2)("el-input"),u=(0,o.g2)("el-form-item"),c=(0,o.g2)("el-tag"),m=(0,o.g2)("el-upload"),k=(0,o.g2)("el-option"),p=(0,o.g2)("el-select"),h=(0,o.g2)("el-form"),f=(0,o.g2)("el-radio-button"),b=(0,o.g2)("el-radio-group"),v=(0,o.g2)("el-checkbox"),_=(0,o.g2)("el-tab-pane"),F=(0,o.g2)("el-tabs"),y=(0,o.g2)("el-dialog");return(0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("div",T,[t[7]||(t[7]=(0,o.Lk)("h2",null,"创建评测任务",-1)),(0,o.bF)(d,{to:"/"},{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>t[6]||(t[6]=[(0,o.eW)("返回")]))),_:1})])),_:1})]),(0,o.bF)(h,{model:s.taskForm,rules:s.rules,ref:"taskForm","label-width":"120px"},{default:(0,o.k6)((()=>[(0,o.bF)(u,{label:"任务名称",prop:"name"},{default:(0,o.k6)((()=>[(0,o.bF)(n,{modelValue:s.taskForm.name,"onUpdate:modelValue":t[0]||(t[0]=e=>s.taskForm.name=e),placeholder:"评测_2025-04-01 14:22:03"},null,8,["modelValue"]),(0,o.Lk)("div",V,(0,g.v_)(s.taskForm.name.length)+"/50",1)])),_:1}),(0,o.bF)(u,{label:"选择模型",prop:"models"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{onClick:r.showModelSelectionDialog},{default:(0,o.k6)((()=>t[8]||(t[8]=[(0,o.eW)("请选择")]))),_:1},8,["onClick"]),s.selectedModels.length>0?((0,o.uX)(),(0,o.CE)("div",L,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.selectedModels,(e=>((0,o.uX)(),(0,o.Wv)(c,{key:e.id,closable:"",onClose:t=>r.removeModel(e)},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(e.provider_name)+"-"+(0,g.v_)(e.name),1)])),_:2},1032,["onClose"])))),128))])):(0,o.Q3)("",!0),(0,o.Lk)("div",W,"已选"+(0,g.v_)(s.selectedModels.length)+"/20",1)])),_:1}),(0,o.bF)(u,{label:"选择评测数据",prop:"excel_file"},{default:(0,o.k6)((()=>[(0,o.bF)(m,{class:"upload-demo",action:"/api/upload/","on-success":r.handleUploadSuccess,"on-error":r.handleUploadError,"before-upload":r.beforeUpload,"file-list":s.fileList},{default:(0,o.k6)((()=>[(0,o.bF)(i,null,{default:(0,o.k6)((()=>t[9]||(t[9]=[(0,o.eW)("请选择")]))),_:1})])),_:1},8,["on-success","on-error","before-upload","file-list"]),t[10]||(t[10]=(0,o.Lk)("div",{class:"upload-hint"},"请选择数据集版本，仅支持已选择已发布的数据集版本，如无数据，请先往模型数据集导入或发布数据集版本",-1))])),_:1}),(0,o.bF)(u,{label:"维度模板",prop:"dimension_template"},{default:(0,o.k6)((()=>[(0,o.bF)(p,{modelValue:s.taskForm.dimension_template,"onUpdate:modelValue":t[1]||(t[1]=e=>s.taskForm.dimension_template=e),placeholder:"选择维度模板"},{default:(0,o.k6)((()=>[(0,o.bF)(k,{label:"选择维度模板",value:""})])),_:1},8,["modelValue"]),t[12]||(t[12]=(0,o.Lk)("div",{class:"template-hint"},"依据不同的评测任务选择不同的评测维度进行评测，评测维度支持自定义，可前往维度管理进行自定义，默认评测维度是较好、一般、较差",-1)),(0,o.bF)(i,{type:"text"},{default:(0,o.k6)((()=>t[11]||(t[11]=[(0,o.eW)("管理维度模板")]))),_:1})])),_:1}),(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(i,{type:"primary",onClick:r.submitForm},{default:(0,o.k6)((()=>t[13]||(t[13]=[(0,o.eW)("开始评测")]))),_:1},8,["onClick"]),(0,o.bF)(i,{onClick:r.resetForm},{default:(0,o.k6)((()=>t[14]||(t[14]=[(0,o.eW)("取消")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"]),(0,o.bF)(y,{title:"选择模型",modelValue:s.modelDialogVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>s.modelDialogVisible=e),width:"60%"},{footer:(0,o.k6)((()=>[(0,o.Lk)("span",S,[(0,o.bF)(i,{onClick:t[4]||(t[4]=e=>s.modelDialogVisible=!1)},{default:(0,o.k6)((()=>t[16]||(t[16]=[(0,o.eW)("取消")]))),_:1}),(0,o.bF)(i,{type:"primary",onClick:r.confirmModelSelection},{default:(0,o.k6)((()=>t[17]||(t[17]=[(0,o.eW)("确定")]))),_:1},8,["onClick"])])])),default:(0,o.k6)((()=>[(0,o.Lk)("div",D,[(0,o.bF)(F,{modelValue:s.activeTab,"onUpdate:modelValue":t[3]||(t[3]=e=>s.activeTab=e)},{default:(0,o.k6)((()=>[(0,o.bF)(_,{label:"官方模型",name:"official"},{default:(0,o.k6)((()=>[(0,o.Lk)("div",$,[(0,o.bF)(b,{modelValue:s.selectedProvider,"onUpdate:modelValue":t[2]||(t[2]=e=>s.selectedProvider=e)},{default:(0,o.k6)((()=>[(0,o.bF)(f,{label:"all"},{default:(0,o.k6)((()=>t[15]||(t[15]=[(0,o.eW)("全部")]))),_:1}),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(s.providers,(e=>((0,o.uX)(),(0,o.Wv)(f,{key:e.name,label:e.name},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])]),(0,o.Lk)("div",x,"共找到"+(0,g.v_)(r.filteredModels.length)+"个模型",1),(0,o.Lk)("div",M,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(r.filteredProviders,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"model-category",key:e.name},[(0,o.Lk)("h3",null,(0,g.v_)(e.name),1),(0,o.Lk)("div",E,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.models,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"model-item",key:e.id},[(0,o.bF)(v,{modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t,disabled:r.isModelSelectionDisabled(e)},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(e.name),1)])),_:2},1032,["modelValue","onUpdate:modelValue","disabled"]),(0,o.Lk)("div",R,(0,g.v_)(e.description),1)])))),128))])])))),128))])])),_:1})])),_:1},8,["modelValue"])])])),_:1},8,["modelValue"])])}const P={name:"CreateTaskForm",data(){return{taskForm:{name:"",eval_type:"comparison",models:[],excel_file:null,dimension_template:""},rules:{name:[{required:!0,message:"请输入任务名称",trigger:"blur"},{max:50,message:"任务名称不能超过50个字符",trigger:"blur"}],models:[{required:!0,message:"请选择至少一个模型",trigger:"change"}],excel_file:[{required:!0,message:"请上传评测数据文件",trigger:"change"}]},fileList:[],modelDialogVisible:!1,activeTab:"official",providers:[],selectedProvider:"all",selectedModels:[]}},computed:{filteredProviders(){return"all"===this.selectedProvider?this.providers:this.providers.filter((e=>e.name===this.selectedProvider))},filteredModels(){let e=[];return this.filteredProviders.forEach((t=>{e=e.concat(t.models)})),e}},created(){this.fetchProviders(),this.generateDefaultTaskName()},methods:{generateDefaultTaskName(){const e=new Date,t=e.toISOString().slice(0,19).replace("T"," ").replace(/-/g,"-");this.taskForm.name=`评测_${t}`},async fetchProviders(){try{this.providers=[{name:"通义千问",models:[{id:1,name:"qwen-turbo",description:"通义千问-极速版",selected:!1},{id:2,name:"qwen-plus",description:"通义千问-增强版",selected:!1},{id:3,name:"qwen-max",description:"通义千问-专业版",selected:!1}]},{name:"DeepSeek",models:[{id:4,name:"deepseek-chat",description:"DeepSeek对话模型",selected:!1},{id:5,name:"deepseek-coder",description:"DeepSeek编程模型",selected:!1}]}]}catch(e){console.error("获取模型提供商失败:",e),this.$message.error("获取模型提供商失败")}},showModelSelectionDialog(){this.modelDialogVisible=!0},isModelSelectionDisabled(e){return!1},confirmModelSelection(){this.selectedModels=[],this.providers.forEach((e=>{e.models.forEach((t=>{t.selected&&this.selectedModels.push({id:t.id,provider_name:e.name,name:t.name})}))})),this.taskForm.models=this.selectedModels.map((e=>({provider_name:e.provider_name,model_name:e.name}))),this.modelDialogVisible=!1},removeModel(e){this.selectedModels=this.selectedModels.filter((t=>t.id!==e.id)),this.taskForm.models=this.taskForm.models.filter((t=>!(t.provider_name===e.provider_name&&t.model_name===e.name))),this.providers.forEach((t=>{if(t.name===e.provider_name){const l=t.models.find((t=>t.name===e.name));l&&(l.selected=!1)}}))},handleUploadSuccess(e,t){this.taskForm.excel_file=e.file_path,this.$message.success("文件上传成功")},handleUploadError(){this.$message.error("文件上传失败")},beforeUpload(e){const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel"===e.type;return!!t||(this.$message.error("只能上传Excel文件!"),!1)},submitForm(){this.$refs.taskForm.validate((async e=>{if(!e)return this.$message.error("请完成必填项"),!1;try{console.log("提交的表单数据:",this.taskForm),this.$message.success("任务创建成功"),this.$router.push("/")}catch(t){console.error("创建任务失败:",t),this.$message.error("创建任务失败: "+(t.response?.data?.message||t.message))}}))},resetForm(){this.$refs.taskForm.resetFields(),this.selectedModels=[],this.providers.forEach((e=>{e.models.forEach((e=>{e.selected=!1}))})),this.fileList=[],this.generateDefaultTaskName()}}},U=(0,k.A)(P,[["render",X],["__scopeId","data-v-c30ba002"]]),O=U,A={class:"task-results"},I={class:"task-info"},j={class:"task-meta"},z={key:0,class:"results-container"},q={key:0,class:"results-chart"},K={ref:"accuracyChart",class:"chart-container"},N={key:1,class:"no-results"},Q={key:0};function B(e,t,l,a,s,r){const i=(0,o.g2)("el-table-column"),d=(0,o.g2)("el-button"),n=(0,o.g2)("el-table"),u=(0,o.g2)("el-empty"),c=(0,o.g2)("el-result"),m=(0,o.g2)("el-tag"),k=(0,o.g2)("el-dialog");return(0,o.uX)(),(0,o.CE)("div",A,[(0,o.Lk)("div",I,[(0,o.Lk)("h3",null,(0,g.v_)(l.task.name),1),(0,o.Lk)("div",j,[(0,o.Lk)("span",null,"创建时间: "+(0,g.v_)(l.task.created_at),1),(0,o.Lk)("span",null,"评测类型: "+(0,g.v_)("single"===l.task.eval_type?"单个评测":"对比评测"),1),(0,o.Lk)("span",null,"状态: "+(0,g.v_)(r.getStatusText(l.task.status)),1)])]),l.task.results&&l.task.results.length>0?((0,o.uX)(),(0,o.CE)("div",z,[t[3]||(t[3]=(0,o.Lk)("h4",null,"评测结果",-1)),(0,o.bF)(n,{data:l.task.results,style:{width:"100%"}},{default:(0,o.k6)((()=>[(0,o.bF)(i,{prop:"provider_identifier",label:"模型",width:"250"},{default:(0,o.k6)((e=>[(0,o.eW)((0,g.v_)(r.formatProviderIdentifier(e.row.provider_identifier)),1)])),_:1}),(0,o.bF)(i,{prop:"accuracy",label:"准确率",width:"150"},{default:(0,o.k6)((e=>[(0,o.eW)((0,g.v_)(r.formatAccuracy(e.row.accuracy)),1)])),_:1}),(0,o.bF)(i,{label:"正确/总数",width:"150"},{default:(0,o.k6)((e=>[(0,o.eW)((0,g.v_)(e.row.correct_tasks)+"/"+(0,g.v_)(e.row.total_tasks),1)])),_:1}),(0,o.bF)(i,{label:"操作"},{default:(0,o.k6)((e=>[(0,o.bF)(d,{type:"primary",size:"small",onClick:t=>r.viewDetailedResults(e.row)},{default:(0,o.k6)((()=>t[1]||(t[1]=[(0,o.eW)("详情")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),l.task.results.length>0?((0,o.uX)(),(0,o.CE)("div",q,[t[2]||(t[2]=(0,o.Lk)("h4",null,"准确率对比",-1)),(0,o.Lk)("div",K,null,512)])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.CE)("div",N,["completed"===l.task.status?((0,o.uX)(),(0,o.Wv)(u,{key:0,description:"暂无评测结果"})):"running"===l.task.status?((0,o.uX)(),(0,o.Wv)(c,{key:1,icon:"info",title:"评测进行中","sub-title":"请稍后查看结果"})):"failed"===l.task.status?((0,o.uX)(),(0,o.Wv)(c,{key:2,icon:"error",title:"评测失败","sub-title":"请检查日志或重新创建评测任务"})):(0,o.Q3)("",!0)])),(0,o.bF)(k,{title:"详细评测结果",modelValue:s.detailedResultsVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>s.detailedResultsVisible=e),width:"80%"},{default:(0,o.k6)((()=>[s.selectedResult?((0,o.uX)(),(0,o.CE)("div",Q,[(0,o.Lk)("h4",null,(0,g.v_)(r.formatProviderIdentifier(s.selectedResult.provider_identifier)),1),(0,o.Lk)("p",null,"准确率: "+(0,g.v_)(r.formatAccuracy(s.selectedResult.accuracy))+" ("+(0,g.v_)(s.selectedResult.correct_tasks)+"/"+(0,g.v_)(s.selectedResult.total_tasks)+")",1),(0,o.bF)(n,{data:s.detailedResultsData,style:{width:"100%"},"max-height":"500"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{prop:"task_id",label:"任务ID",width:"100"}),(0,o.bF)(i,{prop:"task_question",label:"问题",width:"200"}),(0,o.bF)(i,{prop:"ground_truth",label:"标准答案",width:"150"}),(0,o.bF)(i,{prop:"llm_response",label:"模型回答",width:"150"}),(0,o.bF)(i,{prop:"is_correct",label:"是否正确",width:"100"},{default:(0,o.k6)((e=>[(0,o.bF)(m,{type:e.row.is_correct?"success":"danger"},{default:(0,o.k6)((()=>[(0,o.eW)((0,g.v_)(e.row.is_correct?"正确":"错误"),1)])),_:2},1032,["type"])])),_:1})])),_:1},8,["data"])])):(0,o.Q3)("",!0)])),_:1},8,["modelValue"])])}var H=l(6744);const G={name:"TaskResults",props:{task:{type:Object,required:!0}},data(){return{detailedResultsVisible:!1,selectedResult:null,detailedResultsData:[],chart:null}},mounted(){this.task.results&&this.task.results.length>0&&this.$nextTick((()=>{this.initChart()}))},methods:{formatProviderIdentifier(e){if(!e)return"Unknown";const t=e.split("__");return 2===t.length?`${t[0]} - ${t[1]}`:e},formatAccuracy(e){return null===e||void 0===e?"N/A":(100*e).toFixed(2)+"%"},getStatusText(e){const t={pending:"等待中",running:"运行中",completed:"已完成",failed:"失败"};return t[e]||e},async viewDetailedResults(e){this.selectedResult=e;try{const t=await w().get(`/api/tasks/${this.task.id}/results/${e.id}/details/`);this.detailedResultsData=t.data}catch(t){console.error("获取详细结果失败:",t),this.$message.error("获取详细结果失败"),this.detailedResultsData=this.getMockDetailedResults(e)}this.detailedResultsVisible=!0},getMockDetailedResults(e){return Array(10).fill().map(((e,t)=>({task_id:`task_${t+1}`,task_question:`示例问题 ${t+1}`,ground_truth:`答案 ${t+1}`,llm_response:`模型回答 ${t+1}`,is_correct:Math.random()>.3})))},initChart(){if(!this.$refs.accuracyChart)return;this.chart=H.Ts(this.$refs.accuracyChart);const e=this.task.results.map((e=>this.formatProviderIdentifier(e.provider_identifier))),t=this.task.results.map((e=>100*e.accuracy)),l={tooltip:{trigger:"axis",formatter:"{b}: {c}%"},xAxis:{type:"category",data:e,axisLabel:{interval:0,rotate:30}},yAxis:{type:"value",name:"准确率 (%)",min:0,max:100},series:[{data:t,type:"bar",barWidth:"40%",itemStyle:{color:"#5470c6"},label:{show:!0,position:"top",formatter:"{c}%"}}]};this.chart.setOption(l)}},beforeUnmount(){this.chart&&this.chart.dispose()}},J=(0,k.A)(G,[["render",B],["__scopeId","data-v-7a916132"]]),Y=J,Z={name:"TaskList",components:{CreateTaskForm:O,TaskResults:Y},data(){return{tasks:[],currentPage:1,pageSize:10,totalTasks:0,createTaskDialogVisible:!1,resultDialogVisible:!1,selectedTask:null}},created(){this.fetchTasks()},methods:{async fetchTasks(){try{const e=await w().get("/api/tasks/");this.tasks=e.data,this.totalTasks=this.tasks.length}catch(e){console.error("获取任务列表失败:",e),this.$message.error("获取任务列表失败")}},handleCurrentChange(e){this.currentPage=e,this.fetchTasks()},showCreateTaskDialog(){this.createTaskDialogVisible=!0},onTaskCreated(){this.createTaskDialogVisible=!1,this.fetchTasks(),this.$message.success("任务创建成功")},viewResults(e){this.selectedTask=e,this.resultDialogVisible=!0},async stopTask(e){try{await w().post(`/api/tasks/${e.id}/stop/`),this.$message.success("任务已停止"),this.fetchTasks()}catch(t){console.error("停止任务失败:",t),this.$message.error("停止任务失败")}},async deleteTask(e){try{await this.$confirm("此操作将永久删除该任务，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await w()["delete"](`/api/tasks/${e.id}/`),this.$message.success("任务已删除"),this.fetchTasks()}catch(t){"cancel"!==t&&(console.error("删除任务失败:",t),this.$message.error("删除任务失败"))}},downloadResults(e){e.result_file&&window.open(`/media/${e.result_file}`,"_blank")},getStatusType(e){const t={pending:"info",running:"warning",completed:"success",failed:"danger"};return t[e]||"info"},getStatusText(e){const t={pending:"等待中",running:"运行中",completed:"已完成",failed:"失败"};return t[e]||e}}},ee=(0,k.A)(Z,[["render",F],["__scopeId","data-v-452a4b0e"]]),te=ee,le=[{path:"/",name:"Home",component:te},{path:"/tasks",name:"Tasks",component:te},{path:"/create-task",name:"CreateTask",component:O}],ae=(0,f.aE)({history:(0,f.LA)(),routes:le}),se=ae;w().defaults.baseURL="http://localhost:8000";const oe=(0,a.Ef)(h);oe.use(s.A),oe.use(se),oe.mount("#app")}},t={};function l(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,l),o.exports}l.m=e,(()=>{var e=[];l.O=(t,a,s,o)=>{if(!a){var r=1/0;for(u=0;u<e.length;u++){for(var[a,s,o]=e[u],i=!0,d=0;d<a.length;d++)(!1&o||r>=o)&&Object.keys(l.O).every((e=>l.O[e](a[d])))?a.splice(d--,1):(i=!1,o<r&&(r=o));if(i){e.splice(u--,1);var n=s();void 0!==n&&(t=n)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,s,o]}})(),(()=>{l.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return l.d(t,{a:t}),t}})(),(()=>{l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{l.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};l.O.j=t=>0===e[t];var t=(t,a)=>{var s,o,[r,i,d]=a,n=0;if(r.some((t=>0!==e[t]))){for(s in i)l.o(i,s)&&(l.m[s]=i[s]);if(d)var u=d(l)}for(t&&t(a);n<r.length;n++)o=r[n],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(u)},a=self["webpackChunklmeval_frontend"]=self["webpackChunklmeval_frontend"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=l.O(void 0,[504],(()=>l(6547)));a=l.O(a)})();
//# sourceMappingURL=app.js.map