(()=>{"use strict";var e={4365:(e,t,a)=>{var s=a(3751),l=a(4307),r=(a(4188),a(641));const o={class:"app-container"},i={class:"header-content"},d={class:"user-info"},n={class:"user-dropdown"};function u(e,t,a,s,l,u){const c=(0,r.g2)("el-menu-item"),p=(0,r.g2)("el-menu"),m=(0,r.g2)("arrow-down"),h=(0,r.g2)("el-icon"),g=(0,r.g2)("el-dropdown-item"),b=(0,r.g2)("el-dropdown-menu"),k=(0,r.g2)("el-dropdown"),f=(0,r.g2)("el-header"),_=(0,r.g2)("router-view"),v=(0,r.g2)("el-main"),F=(0,r.g2)("el-footer"),y=(0,r.g2)("el-container");return(0,r.uX)(),(0,r.CE)("div",o,[(0,r.bF)(y,null,{default:(0,r.k6)((()=>[(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.Lk)("div",i,[t[6]||(t[6]=(0,r.Lk)("div",{class:"logo"},[(0,r.Lk)("h1",null,"LLM评测系统")],-1)),(0,r.bF)(p,{mode:"horizontal",router:!0,"default-active":u.activeMenu},{default:(0,r.k6)((()=>[(0,r.bF)(c,{index:"/"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.eW)("首页")]))),_:1}),(0,r.bF)(c,{index:"/tasks"},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)("评测任务")]))),_:1}),(0,r.bF)(c,{index:"/datasets"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.eW)("数据集管理")]))),_:1})])),_:1},8,["default-active"]),(0,r.Lk)("div",d,[(0,r.bF)(k,null,{dropdown:(0,r.k6)((()=>[(0,r.bF)(b,null,{default:(0,r.k6)((()=>[(0,r.bF)(g,null,{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("个人设置")]))),_:1}),(0,r.bF)(g,null,{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("退出登录")]))),_:1})])),_:1})])),default:(0,r.k6)((()=>[(0,r.Lk)("span",n,[t[3]||(t[3]=(0,r.eW)(" 管理员 ")),(0,r.bF)(h,null,{default:(0,r.k6)((()=>[(0,r.bF)(m)])),_:1})])])),_:1})])])])),_:1}),(0,r.bF)(v,null,{default:(0,r.k6)((()=>[(0,r.bF)(_,null,{default:(0,r.k6)((({Component:e})=>[((0,r.uX)(),(0,r.Wv)(r.PR,null,[((0,r.uX)(),(0,r.Wv)((0,r.$y)(e)))],1024))])),_:1})])),_:1}),(0,r.bF)(F,null,{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.Lk)("div",{class:"footer-content"},[(0,r.Lk)("p",null,"© 2025 LLM评测系统 - 基于Django和Vue.js构建")],-1)]))),_:1})])),_:1})])}var c=a(8548);const p={name:"App",components:{ArrowDown:c.yd$},computed:{activeMenu(){return this.$route.path}}};var m=a(6262);const h=(0,m.A)(p,[["render",u]]),g=h;var b=a(5220),k=a(33);const f={class:"task-list-container"},_={class:"header-actions"},v={class:"left-actions"};function F(e,t,a,s,l,o){const i=(0,r.g2)("el-button"),d=(0,r.g2)("router-link"),n=(0,r.g2)("el-table-column"),u=(0,r.g2)("el-tag"),c=(0,r.g2)("el-table"),p=(0,r.g2)("el-pagination"),m=(0,r.g2)("create-task-form"),h=(0,r.g2)("el-dialog"),g=(0,r.g2)("task-results"),b=(0,r.gN)("loading");return(0,r.uX)(),(0,r.CE)("div",f,[(0,r.Lk)("div",_,[(0,r.Lk)("div",v,[t[2]||(t[2]=(0,r.Lk)("h2",null,"任务列表",-1)),(0,r.bF)(i,{circle:"",icon:"Refresh",onClick:o.fetchTasks,loading:e.loading,title:"刷新任务列表"},null,8,["onClick","loading"])]),(0,r.bF)(d,{to:"/create-task"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{type:"primary"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)("创建评测任务")]))),_:1})])),_:1})]),(0,r.bo)(((0,r.uX)(),(0,r.Wv)(c,{data:l.tasks,style:{width:"100%"}},{default:(0,r.k6)((()=>[(0,r.bF)(n,{prop:"name",label:"任务名称",width:"250"}),(0,r.bF)(n,{label:"评测模型",width:"250"},{default:(0,r.k6)((e=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.row.models,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id},(0,k.v_)(e.provider_name)+"-"+(0,k.v_)(e.model_name),1)))),128))])),_:1}),(0,r.bF)(n,{prop:"eval_type",label:"评测方式",width:"120"},{default:(0,r.k6)((e=>[(0,r.eW)((0,k.v_)("single"===e.row.eval_type?"单个评测":"对比评测"),1)])),_:1}),(0,r.bF)(n,{prop:"status",label:"评测状态",width:"120"},{default:(0,r.k6)((e=>[(0,r.bF)(u,{type:o.getStatusType(e.row.status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(o.getStatusText(e.row.status)),1)])),_:2},1032,["type"])])),_:1}),(0,r.bF)(n,{prop:"created_at",label:"创建时间",width:"180"}),(0,r.bF)(n,{label:"操作"},{default:(0,r.k6)((e=>[(0,r.bF)(i,{type:"primary",size:"small",onClick:t=>o.viewResults(e.row)},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("结果")]))),_:2},1032,["onClick"]),(0,r.bF)(i,{type:"info",size:"small",onClick:t=>o.stopTask(e.row),disabled:"running"!==e.row.status},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("终止")]))),_:2},1032,["onClick","disabled"]),(0,r.bF)(i,{type:"danger",size:"small",onClick:t=>o.deleteTask(e.row)},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)("删除")]))),_:2},1032,["onClick"]),(0,r.bF)(i,{type:"success",size:"small",onClick:t=>o.downloadResults(e.row),disabled:!e.row.result_file},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)("下载")]))),_:2},1032,["onClick","disabled"])])),_:1})])),_:1},8,["data"])),[[b,e.loading]]),(0,r.bF)(p,{onCurrentChange:o.handleCurrentChange,"current-page":l.currentPage,"page-size":l.pageSize,layout:"prev, pager, next",total:l.totalTasks},null,8,["onCurrentChange","current-page","page-size","total"]),(0,r.bF)(h,{title:"创建评测任务",modelValue:l.createTaskDialogVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>l.createTaskDialogVisible=e),width:"50%"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{onTaskCreated:o.onTaskCreated},null,8,["onTaskCreated"])])),_:1},8,["modelValue"]),(0,r.bF)(h,{title:"评测结果",modelValue:l.resultDialogVisible,"onUpdate:modelValue":t[1]||(t[1]=e=>l.resultDialogVisible=e),width:"70%"},{default:(0,r.k6)((()=>[l.selectedTask?((0,r.uX)(),(0,r.Wv)(g,{key:0,task:l.selectedTask},null,8,["task"])):(0,r.Q3)("",!0)])),_:1},8,["modelValue"])])}var y=a(2505),w=a.n(y);const C={class:"create-task-container"},D={class:"header-actions"},V={class:"char-count"},$={key:0,class:"selected-models"},T={class:"model-count"},x={class:"model-selection-tabs"},W={class:"provider-filter"},L={class:"model-count-info"},S={class:"model-list"},U={class:"model-items"},E={class:"model-description"},P={class:"dialog-footer"};function I(e,t,a,s,l,o){const i=(0,r.g2)("el-button"),d=(0,r.g2)("router-link"),n=(0,r.g2)("el-input"),u=(0,r.g2)("el-form-item"),c=(0,r.g2)("el-tag"),p=(0,r.g2)("el-upload"),m=(0,r.g2)("el-option"),h=(0,r.g2)("el-select"),g=(0,r.g2)("el-form"),b=(0,r.g2)("el-radio-button"),f=(0,r.g2)("el-radio-group"),_=(0,r.g2)("el-checkbox"),v=(0,r.g2)("el-tab-pane"),F=(0,r.g2)("el-tabs"),y=(0,r.g2)("el-dialog");return(0,r.uX)(),(0,r.CE)("div",C,[(0,r.Lk)("div",D,[t[7]||(t[7]=(0,r.Lk)("h2",null,"创建评测任务",-1)),(0,r.bF)(d,{to:"/"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)("返回")]))),_:1})])),_:1})]),(0,r.bF)(g,{model:l.taskForm,rules:l.rules,ref:"taskForm","label-width":"120px"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{label:"任务名称",prop:"name"},{default:(0,r.k6)((()=>[(0,r.bF)(n,{modelValue:l.taskForm.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.taskForm.name=e),placeholder:"评测_2025-04-01 14:22:03"},null,8,["modelValue"]),(0,r.Lk)("div",V,(0,k.v_)(l.taskForm.name.length)+"/50",1)])),_:1}),(0,r.bF)(u,{label:"选择模型",prop:"models"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{onClick:o.showModelSelectionDialog},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.eW)("请选择")]))),_:1},8,["onClick"]),l.selectedModels.length>0?((0,r.uX)(),(0,r.CE)("div",$,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.selectedModels,(e=>((0,r.uX)(),(0,r.Wv)(c,{key:e.id,closable:"",onClose:t=>o.removeModel(e)},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(e.provider_name)+"-"+(0,k.v_)(e.name),1)])),_:2},1032,["onClose"])))),128))])):(0,r.Q3)("",!0),(0,r.Lk)("div",T,"已选"+(0,k.v_)(l.selectedModels.length)+"/20",1)])),_:1}),(0,r.bF)(u,{label:"选择评测数据",prop:"excel_file"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"upload-demo",action:"/api/upload/","on-success":o.handleUploadSuccess,"on-error":o.handleUploadError,"before-upload":o.beforeUpload,"file-list":l.fileList},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.eW)("请选择")]))),_:1})])),_:1},8,["on-success","on-error","before-upload","file-list"]),t[10]||(t[10]=(0,r.Lk)("div",{class:"upload-hint"},"请选择数据集版本，仅支持已选择已发布的数据集版本，如无数据，请先往模型数据集导入或发布数据集版本",-1))])),_:1}),(0,r.bF)(u,{label:"维度模板",prop:"dimension_template"},{default:(0,r.k6)((()=>[(0,r.bF)(h,{modelValue:l.taskForm.dimension_template,"onUpdate:modelValue":t[1]||(t[1]=e=>l.taskForm.dimension_template=e),placeholder:"选择维度模板"},{default:(0,r.k6)((()=>[(0,r.bF)(m,{label:"选择维度模板",value:""})])),_:1},8,["modelValue"]),t[12]||(t[12]=(0,r.Lk)("div",{class:"template-hint"},"依据不同的评测任务选择不同的评测维度进行评测，评测维度支持自定义，可前往维度管理进行自定义，默认评测维度是较好、一般、较差",-1)),(0,r.bF)(i,{type:"text"},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("管理维度模板")]))),_:1})])),_:1}),(0,r.bF)(u,null,{default:(0,r.k6)((()=>[(0,r.bF)(i,{type:"primary",onClick:o.submitForm},{default:(0,r.k6)((()=>t[13]||(t[13]=[(0,r.eW)("开始评测")]))),_:1},8,["onClick"]),(0,r.bF)(i,{onClick:o.resetForm},{default:(0,r.k6)((()=>t[14]||(t[14]=[(0,r.eW)("取消")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"]),(0,r.bF)(y,{title:"选择模型",modelValue:l.modelDialogVisible,"onUpdate:modelValue":t[5]||(t[5]=e=>l.modelDialogVisible=e),width:"60%"},{footer:(0,r.k6)((()=>[(0,r.Lk)("span",P,[(0,r.bF)(i,{onClick:t[4]||(t[4]=e=>l.modelDialogVisible=!1)},{default:(0,r.k6)((()=>t[16]||(t[16]=[(0,r.eW)("取消")]))),_:1}),(0,r.bF)(i,{type:"primary",onClick:o.confirmModelSelection},{default:(0,r.k6)((()=>t[17]||(t[17]=[(0,r.eW)("确定")]))),_:1},8,["onClick"])])])),default:(0,r.k6)((()=>[(0,r.Lk)("div",x,[(0,r.bF)(F,{modelValue:l.activeTab,"onUpdate:modelValue":t[3]||(t[3]=e=>l.activeTab=e)},{default:(0,r.k6)((()=>[(0,r.bF)(v,{label:"内置模型",name:"provided"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",W,[(0,r.bF)(f,{modelValue:l.selectedProvider,"onUpdate:modelValue":t[2]||(t[2]=e=>l.selectedProvider=e)},{default:(0,r.k6)((()=>[(0,r.bF)(b,{label:"all"},{default:(0,r.k6)((()=>t[15]||(t[15]=[(0,r.eW)("全部")]))),_:1}),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.providers,(e=>((0,r.uX)(),(0,r.Wv)(b,{key:e.name,label:e.name},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(e.name),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])]),(0,r.Lk)("div",L,"共找到"+(0,k.v_)(o.filteredModels.length)+"个模型",1),(0,r.Lk)("div",S,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.filteredProviders,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"model-category",key:e.name},[(0,r.Lk)("h3",null,(0,k.v_)(e.name),1),(0,r.Lk)("div",U,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.models,(e=>((0,r.uX)(),(0,r.CE)("div",{class:"model-item",key:e.id},[(0,r.bF)(_,{modelValue:e.selected,"onUpdate:modelValue":t=>e.selected=t,disabled:o.isModelSelectionDisabled(e)},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(e.name),1)])),_:2},1032,["modelValue","onUpdate:modelValue","disabled"]),(0,r.Lk)("div",E,(0,k.v_)(e.description),1)])))),128))])])))),128))])])),_:1})])),_:1},8,["modelValue"])])])),_:1},8,["modelValue"])])}const M={name:"CreateTaskForm",data(){return{taskForm:{name:"",eval_type:"comparison",models:[],excel_file:null,dimension_template:""},rules:{name:[{required:!0,message:"请输入任务名称",trigger:"blur"},{max:50,message:"任务名称不能超过50个字符",trigger:"blur"}],models:[{required:!0,message:"请选择至少一个模型",trigger:"change"}],excel_file:[{required:!0,message:"请上传评测数据文件",trigger:"change"}]},fileList:[],modelDialogVisible:!1,activeTab:"official",providers:[],selectedProvider:"all",selectedModels:[]}},computed:{filteredProviders(){return"all"===this.selectedProvider?this.providers:this.providers.filter((e=>e.name===this.selectedProvider))},filteredModels(){let e=[];return this.filteredProviders.forEach((t=>{e=e.concat(t.models)})),e}},created(){this.fetchProviders(),this.generateDefaultTaskName()},methods:{generateDefaultTaskName(){const e=new Date,t=e.toISOString().slice(0,19).replace("T"," ").replace(/-/g,"-");this.taskForm.name=`评测_${t}`},async fetchProviders(){try{this.providers=[{name:"通义千问",models:[{id:1,name:"qwen-turbo",description:"通义千问-极速版",selected:!1},{id:2,name:"qwen-plus",description:"通义千问-增强版",selected:!1},{id:3,name:"qwen-max",description:"通义千问-专业版",selected:!1}]},{name:"DeepSeek",models:[{id:4,name:"deepseek-chat",description:"DeepSeek对话模型",selected:!1},{id:5,name:"deepseek-coder",description:"DeepSeek编程模型",selected:!1}]}]}catch(e){console.error("获取模型提供商失败:",e),this.$message.error("获取模型提供商失败")}},showModelSelectionDialog(){this.modelDialogVisible=!0},isModelSelectionDisabled(e){return!1},confirmModelSelection(){this.selectedModels=[],this.providers.forEach((e=>{e.models.forEach((t=>{t.selected&&this.selectedModels.push({id:t.id,provider_name:e.name,name:t.name})}))})),this.taskForm.models=this.selectedModels.map((e=>({provider_name:e.provider_name,model_name:e.name}))),this.modelDialogVisible=!1},removeModel(e){this.selectedModels=this.selectedModels.filter((t=>t.id!==e.id)),this.taskForm.models=this.taskForm.models.filter((t=>!(t.provider_name===e.provider_name&&t.model_name===e.name))),this.providers.forEach((t=>{if(t.name===e.provider_name){const a=t.models.find((t=>t.name===e.name));a&&(a.selected=!1)}}))},handleUploadSuccess(e,t){this.taskForm.excel_file=e.file_path,this.$message.success("文件上传成功")},handleUploadError(){this.$message.error("文件上传失败")},beforeUpload(e){const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel"===e.type;return!!t||(this.$message.error("只能上传Excel文件!"),!1)},submitForm(){this.$refs.taskForm.validate((async e=>{if(!e)return this.$message.error("请完成必填项"),!1;try{console.log("提交的表单数据:",this.taskForm),this.$message.success("任务创建成功"),this.$router.push("/")}catch(t){console.error("创建任务失败:",t),this.$message.error("创建任务失败: "+(t.response?.data?.message||t.message))}}))},resetForm(){this.$refs.taskForm.resetFields(),this.selectedModels=[],this.providers.forEach((e=>{e.models.forEach((e=>{e.selected=!1}))})),this.fileList=[],this.generateDefaultTaskName()}}},R=(0,m.A)(M,[["render",I],["__scopeId","data-v-8ecffb42"]]),X=R,z={class:"task-results"},A={class:"task-info"},q={class:"task-meta"},O={key:0,class:"results-container"},j={key:0,class:"results-chart"},B={ref:"accuracyChart",class:"chart-container"},Q={key:1,class:"no-results"},N={key:0};function K(e,t,a,s,l,o){const i=(0,r.g2)("el-table-column"),d=(0,r.g2)("el-button"),n=(0,r.g2)("el-table"),u=(0,r.g2)("el-empty"),c=(0,r.g2)("el-result"),p=(0,r.g2)("el-tag"),m=(0,r.g2)("el-dialog");return(0,r.uX)(),(0,r.CE)("div",z,[(0,r.Lk)("div",A,[(0,r.Lk)("h3",null,(0,k.v_)(a.task.name),1),(0,r.Lk)("div",q,[(0,r.Lk)("span",null,"创建时间: "+(0,k.v_)(a.task.created_at),1),(0,r.Lk)("span",null,"评测类型: "+(0,k.v_)("single"===a.task.eval_type?"单个评测":"对比评测"),1),(0,r.Lk)("span",null,"状态: "+(0,k.v_)(o.getStatusText(a.task.status)),1)])]),a.task.results&&a.task.results.length>0?((0,r.uX)(),(0,r.CE)("div",O,[t[3]||(t[3]=(0,r.Lk)("h4",null,"评测结果",-1)),(0,r.bF)(n,{data:a.task.results,style:{width:"100%"}},{default:(0,r.k6)((()=>[(0,r.bF)(i,{prop:"provider_identifier",label:"模型",width:"250"},{default:(0,r.k6)((e=>[(0,r.eW)((0,k.v_)(o.formatProviderIdentifier(e.row.provider_identifier)),1)])),_:1}),(0,r.bF)(i,{prop:"accuracy",label:"准确率",width:"150"},{default:(0,r.k6)((e=>[(0,r.eW)((0,k.v_)(o.formatAccuracy(e.row.accuracy)),1)])),_:1}),(0,r.bF)(i,{label:"正确/总数",width:"150"},{default:(0,r.k6)((e=>[(0,r.eW)((0,k.v_)(e.row.correct_tasks)+"/"+(0,k.v_)(e.row.total_tasks),1)])),_:1}),(0,r.bF)(i,{label:"操作"},{default:(0,r.k6)((e=>[(0,r.bF)(d,{type:"primary",size:"small",onClick:t=>o.viewDetailedResults(e.row)},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.eW)("详情")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),a.task.results.length>0?((0,r.uX)(),(0,r.CE)("div",j,[t[2]||(t[2]=(0,r.Lk)("h4",null,"准确率对比",-1)),(0,r.Lk)("div",B,null,512)])):(0,r.Q3)("",!0)])):((0,r.uX)(),(0,r.CE)("div",Q,["completed"===a.task.status?((0,r.uX)(),(0,r.Wv)(u,{key:0,description:"暂无评测结果"})):"running"===a.task.status?((0,r.uX)(),(0,r.Wv)(c,{key:1,icon:"info",title:"评测进行中","sub-title":"请稍后查看结果"})):"failed"===a.task.status?((0,r.uX)(),(0,r.Wv)(c,{key:2,icon:"error",title:"评测失败","sub-title":"请检查日志或重新创建评测任务"})):(0,r.Q3)("",!0)])),(0,r.bF)(m,{title:"详细评测结果",modelValue:l.detailedResultsVisible,"onUpdate:modelValue":t[0]||(t[0]=e=>l.detailedResultsVisible=e),width:"80%"},{default:(0,r.k6)((()=>[l.selectedResult?((0,r.uX)(),(0,r.CE)("div",N,[(0,r.Lk)("h4",null,(0,k.v_)(o.formatProviderIdentifier(l.selectedResult.provider_identifier)),1),(0,r.Lk)("p",null,"准确率: "+(0,k.v_)(o.formatAccuracy(l.selectedResult.accuracy))+" ("+(0,k.v_)(l.selectedResult.correct_tasks)+"/"+(0,k.v_)(l.selectedResult.total_tasks)+")",1),(0,r.bF)(n,{data:l.detailedResultsData,style:{width:"100%"},"max-height":"500"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{prop:"task_id",label:"任务ID",width:"100"}),(0,r.bF)(i,{prop:"task_question",label:"问题",width:"200"}),(0,r.bF)(i,{prop:"ground_truth",label:"标准答案",width:"150"}),(0,r.bF)(i,{prop:"llm_response",label:"模型回答",width:"150"}),(0,r.bF)(i,{prop:"is_correct",label:"是否正确",width:"100"},{default:(0,r.k6)((e=>[(0,r.bF)(p,{type:e.row.is_correct?"success":"danger"},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(e.row.is_correct?"正确":"错误"),1)])),_:2},1032,["type"])])),_:1})])),_:1},8,["data"])])):(0,r.Q3)("",!0)])),_:1},8,["modelValue"])])}var Z=a(6744);const H={name:"TaskResults",props:{task:{type:Object,required:!0}},data(){return{detailedResultsVisible:!1,selectedResult:null,detailedResultsData:[],chart:null}},mounted(){this.task.results&&this.task.results.length>0&&this.$nextTick((()=>{this.initChart()}))},methods:{formatProviderIdentifier(e){if(!e)return"Unknown";const t=e.split("__");return 2===t.length?`${t[0]} - ${t[1]}`:e},formatAccuracy(e){return null===e||void 0===e?"N/A":(100*e).toFixed(2)+"%"},getStatusText(e){const t={pending:"等待中",running:"运行中",completed:"已完成",failed:"失败"};return t[e]||e},async viewDetailedResults(e){this.selectedResult=e;try{const t=await w().get(`/api/tasks/${this.task.id}/results/${e.id}/details/`);this.detailedResultsData=t.data}catch(t){console.error("获取详细结果失败:",t),this.$message.error("获取详细结果失败"),this.detailedResultsData=this.getMockDetailedResults(e)}this.detailedResultsVisible=!0},getMockDetailedResults(e){return Array(10).fill().map(((e,t)=>({task_id:`task_${t+1}`,task_question:`示例问题 ${t+1}`,ground_truth:`答案 ${t+1}`,llm_response:`模型回答 ${t+1}`,is_correct:Math.random()>.3})))},initChart(){if(!this.$refs.accuracyChart)return;this.chart=Z.Ts(this.$refs.accuracyChart);const e=this.task.results.map((e=>this.formatProviderIdentifier(e.provider_identifier))),t=this.task.results.map((e=>100*e.accuracy)),a={tooltip:{trigger:"axis",formatter:"{b}: {c}%"},xAxis:{type:"category",data:e,axisLabel:{interval:0,rotate:30}},yAxis:{type:"value",name:"准确率 (%)",min:0,max:100},series:[{data:t,type:"bar",barWidth:"40%",itemStyle:{color:"#5470c6"},label:{show:!0,position:"top",formatter:"{c}%"}}]};this.chart.setOption(a)}},beforeUnmount(){this.chart&&this.chart.dispose()}},G=(0,m.A)(H,[["render",K],["__scopeId","data-v-7a916132"]]),J=G,Y={name:"TaskList",components:{CreateTaskForm:X,TaskResults:J},data(){return{tasks:[],currentPage:1,pageSize:10,totalTasks:0,createTaskDialogVisible:!1,resultDialogVisible:!1,selectedTask:null}},created(){this.fetchTasks()},methods:{async fetchTasks(){try{const e=await w().get("/api/tasks/");this.tasks=e.data,this.totalTasks=this.tasks.length}catch(e){console.error("获取任务列表失败:",e),this.$message.error("获取任务列表失败")}},handleCurrentChange(e){this.currentPage=e,this.fetchTasks()},showCreateTaskDialog(){this.createTaskDialogVisible=!0},onTaskCreated(){this.createTaskDialogVisible=!1,this.fetchTasks(),this.$message.success("任务创建成功")},viewResults(e){this.selectedTask=e,this.resultDialogVisible=!0},async stopTask(e){try{await w().post(`/api/tasks/${e.id}/stop/`),this.$message.success("任务已停止"),this.fetchTasks()}catch(t){console.error("停止任务失败:",t),this.$message.error("停止任务失败")}},async deleteTask(e){try{await this.$confirm("此操作将永久删除该任务，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await w()["delete"](`/api/tasks/${e.id}/`),this.$message.success("任务已删除"),this.fetchTasks()}catch(t){"cancel"!==t&&(console.error("删除任务失败:",t),this.$message.error("删除任务失败"))}},downloadResults(e){e.result_file&&window.open(`/media/${e.result_file}`,"_blank")},getStatusType(e){const t={pending:"info",running:"warning",completed:"success",failed:"danger"};return t[e]||"info"},getStatusText(e){const t={pending:"等待中",running:"运行中",completed:"已完成",failed:"失败"};return t[e]||e}}},ee=(0,m.A)(Y,[["render",F],["__scopeId","data-v-452a4b0e"]]),te=ee,ae={class:"dataset-list-container"},se={class:"header-actions"},le={class:"left-actions"},re={class:"search-bar"};function oe(e,t,a,s,l,o){const i=(0,r.g2)("el-button"),d=(0,r.g2)("plus"),n=(0,r.g2)("el-icon"),u=(0,r.g2)("el-input"),c=(0,r.g2)("el-option"),p=(0,r.g2)("el-select"),m=(0,r.g2)("el-table-column"),h=(0,r.g2)("el-tag"),g=(0,r.g2)("el-table"),b=(0,r.g2)("el-pagination"),f=(0,r.g2)("create-dataset-form"),_=(0,r.g2)("el-dialog"),v=(0,r.gN)("loading");return(0,r.uX)(),(0,r.CE)("div",ae,[(0,r.Lk)("div",se,[(0,r.Lk)("div",le,[t[3]||(t[3]=(0,r.Lk)("h2",null,"数据集列表",-1)),(0,r.bF)(i,{circle:"",icon:"Refresh",onClick:o.fetchDatasets,loading:l.loading,title:"刷新数据集列表"},null,8,["onClick","loading"])]),(0,r.bF)(i,{type:"primary",onClick:o.showCreateDatasetDialog},{default:(0,r.k6)((()=>[(0,r.bF)(n,null,{default:(0,r.k6)((()=>[(0,r.bF)(d)])),_:1}),t[4]||(t[4]=(0,r.eW)(" 新增数据集 "))])),_:1},8,["onClick"])]),(0,r.Lk)("div",re,[(0,r.bF)(u,{modelValue:l.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=e=>l.searchQuery=e),placeholder:"搜索数据集名称",class:"search-input",clearable:""},null,8,["modelValue"]),(0,r.bF)(p,{modelValue:l.datasetTypeFilter,"onUpdate:modelValue":t[1]||(t[1]=e=>l.datasetTypeFilter=e),placeholder:"选择数据集类型",clearable:"",class:"type-filter"},{default:(0,r.k6)((()=>[(0,r.bF)(c,{label:"全部类型",value:""}),(0,r.bF)(c,{label:"评测集-文本生成",value:"评测集-文本生成"}),(0,r.bF)(c,{label:"评测集-代码生成",value:"评测集-代码生成"})])),_:1},8,["modelValue"]),(0,r.bF)(i,{type:"primary",onClick:o.searchDatasets},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("搜索")]))),_:1},8,["onClick"])]),(0,r.bo)(((0,r.uX)(),(0,r.Wv)(g,{data:l.datasets,style:{width:"100%"}},{default:(0,r.k6)((()=>[(0,r.bF)(m,{prop:"name",label:"数据集名称",width:"200"}),(0,r.bF)(m,{prop:"type",label:"数据集类型",width:"150"}),(0,r.bF)(m,{prop:"version",label:"最新版本",width:"100"}),(0,r.bF)(m,{prop:"count",label:"数据量",width:"100"}),(0,r.bF)(m,{prop:"import_status",label:"导入状态",width:"120"},{default:(0,r.k6)((e=>[(0,r.bF)(h,{type:o.getImportStatusType(e.row.import_status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(o.getImportStatusText(e.row.import_status)),1)])),_:2},1032,["type"])])),_:1}),(0,r.bF)(m,{prop:"publish_status",label:"发布状态",width:"120"},{default:(0,r.k6)((e=>[(0,r.bF)(h,{type:o.getPublishStatusType(e.row.publish_status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(o.getPublishStatusText(e.row.publish_status)),1)])),_:2},1032,["type"])])),_:1}),(0,r.bF)(m,{prop:"updated_at",label:"版本更新时间",width:"180"}),(0,r.bF)(m,{label:"操作"},{default:(0,r.k6)((e=>[(0,r.bF)(i,{type:"primary",size:"small",onClick:t=>o.viewDataset(e.row)},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)("查看")]))),_:2},1032,["onClick"]),(0,r.bF)(i,{type:"success",size:"small",onClick:t=>o.exportDataset(e.row)},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)("导出")]))),_:2},1032,["onClick"]),(0,r.bF)(i,{type:"warning",size:"small",onClick:t=>o.publishDataset(e.row),disabled:"published"===e.row.publish_status},{default:(0,r.k6)((()=>t[8]||(t[8]=[(0,r.eW)("发布")]))),_:2},1032,["onClick","disabled"]),(0,r.bF)(i,{type:"danger",size:"small",onClick:t=>o.deleteDataset(e.row)},{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.eW)("删除")]))),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[v,l.loading]]),(0,r.bF)(b,{onCurrentChange:o.handleCurrentChange,"current-page":l.currentPage,"page-size":l.pageSize,layout:"prev, pager, next, total",total:l.totalDatasets},null,8,["onCurrentChange","current-page","page-size","total"]),(0,r.bF)(_,{title:"新增数据集",modelValue:l.createDatasetDialogVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>l.createDatasetDialogVisible=e),width:"50%"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{onDatasetCreated:o.onDatasetCreated},null,8,["onDatasetCreated"])])),_:1},8,["modelValue"])])}const ie={class:"create-dataset-container"},de={class:"char-count"},ne={class:"char-count"};function ue(e,t,a,s,l,o){const i=(0,r.g2)("el-input"),d=(0,r.g2)("el-form-item"),n=(0,r.g2)("el-option"),u=(0,r.g2)("el-select"),c=(0,r.g2)("el-button"),p=(0,r.g2)("el-upload"),m=(0,r.g2)("el-form");return(0,r.uX)(),(0,r.CE)("div",ie,[(0,r.bF)(m,{model:l.datasetForm,rules:l.rules,ref:"datasetForm","label-width":"120px"},{default:(0,r.k6)((()=>[(0,r.bF)(d,{label:"数据集名称",prop:"name"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{modelValue:l.datasetForm.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.datasetForm.name=e),placeholder:"请输入数据集名称"},null,8,["modelValue"]),(0,r.Lk)("div",de,(0,k.v_)(l.datasetForm.name.length)+"/50",1)])),_:1}),(0,r.bF)(d,{label:"数据集类型",prop:"type"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{modelValue:l.datasetForm.type,"onUpdate:modelValue":t[1]||(t[1]=e=>l.datasetForm.type=e),placeholder:"请选择数据集类型"},{default:(0,r.k6)((()=>[(0,r.bF)(n,{label:"评测集-文本生成",value:"评测集-文本生成"}),(0,r.bF)(n,{label:"评测集-代码生成",value:"评测集-代码生成"})])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(d,{label:"上传数据文件",prop:"file"},{default:(0,r.k6)((()=>[(0,r.bF)(p,{class:"upload-demo",action:"/api/datasets/upload/","on-success":o.handleUploadSuccess,"on-error":o.handleUploadError,"before-upload":o.beforeUpload,"file-list":l.fileList},{default:(0,r.k6)((()=>[(0,r.bF)(c,null,{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)("选择文件")]))),_:1})])),_:1},8,["on-success","on-error","before-upload","file-list"]),t[4]||(t[4]=(0,r.Lk)("div",{class:"upload-hint"},"支持Excel文件格式，文件大小不超过10MB",-1))])),_:1}),(0,r.bF)(d,{label:"数据集描述",prop:"description"},{default:(0,r.k6)((()=>[(0,r.bF)(i,{type:"textarea",modelValue:l.datasetForm.description,"onUpdate:modelValue":t[2]||(t[2]=e=>l.datasetForm.description=e),placeholder:"请输入数据集描述",rows:4},null,8,["modelValue"]),(0,r.Lk)("div",ne,(0,k.v_)(l.datasetForm.description.length)+"/200",1)])),_:1}),(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(c,{type:"primary",onClick:o.submitForm},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("创建数据集")]))),_:1},8,["onClick"]),(0,r.bF)(c,{onClick:o.resetForm},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)("取消")]))),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])}const ce={name:"CreateDatasetForm",data(){return{datasetForm:{name:"",type:"",file:null,description:""},rules:{name:[{required:!0,message:"请输入数据集名称",trigger:"blur"},{max:50,message:"数据集名称不能超过50个字符",trigger:"blur"}],type:[{required:!0,message:"请选择数据集类型",trigger:"change"}],file:[{required:!0,message:"请上传数据文件",trigger:"change"}],description:[{max:200,message:"描述不能超过200个字符",trigger:"blur"}]},fileList:[]}},methods:{handleUploadSuccess(e,t){this.datasetForm.file=e.file_path,this.$message.success("文件上传成功")},handleUploadError(){this.$message.error("文件上传失败")},beforeUpload(e){const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel"===e.type,a=e.size/1024/1024<10;return t?!!a||(this.$message.error("文件大小不能超过10MB!"),!1):(this.$message.error("只能上传Excel文件!"),!1)},submitForm(){this.$refs.datasetForm.validate((async e=>{if(!e)return this.$message.error("请完成必填项"),!1;try{console.log("提交的表单数据:",this.datasetForm),this.$emit("dataset-created")}catch(t){console.error("创建数据集失败:",t),this.$message.error("创建数据集失败: "+(t.response?.data?.message||t.message))}}))},resetForm(){this.$refs.datasetForm.resetFields(),this.fileList=[]}}},pe=(0,m.A)(ce,[["render",ue],["__scopeId","data-v-0720472d"]]),me=pe,he={name:"DatasetList",components:{CreateDatasetForm:me,Plus:c.FWt,Refresh:c.C42},data(){return{datasets:[],loading:!1,currentPage:1,pageSize:10,totalDatasets:0,searchQuery:"",datasetTypeFilter:"",createDatasetDialogVisible:!1}},created(){this.fetchDatasets()},methods:{async fetchDatasets(){this.loading=!0;try{setTimeout((()=>{this.datasets=[{id:1,name:"Zeugma",type:"评测集-文本生成",version:"V1",count:300,import_status:"success",publish_status:"published",updated_at:"2025-02-09 22:07:41"}],this.totalDatasets=1,this.loading=!1}),500)}catch(e){console.error("获取数据集列表失败:",e),this.$message.error("获取数据集列表失败"),this.loading=!1}},searchDatasets(){this.currentPage=1,this.fetchDatasets()},handleCurrentChange(e){this.currentPage=e,this.fetchDatasets()},showCreateDatasetDialog(){this.createDatasetDialogVisible=!0},onDatasetCreated(){this.createDatasetDialogVisible=!1,this.fetchDatasets(),this.$message.success("数据集创建成功")},viewDataset(e){this.$router.push(`/datasets/${e.id}`)},async exportDataset(e){try{this.$message.success(`数据集 ${e.name} 导出成功`)}catch(t){console.error("导出数据集失败:",t),this.$message.error("导出数据集失败")}},async publishDataset(e){try{this.$message.success(`数据集 ${e.name} 发布成功`),this.fetchDatasets()}catch(t){console.error("发布数据集失败:",t),this.$message.error("发布数据集失败")}},async deleteDataset(e){try{await this.$confirm("此操作将永久删除该数据集，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),this.$message.success(`数据集 ${e.name} 删除成功`),this.fetchDatasets()}catch(t){"cancel"!==t&&(console.error("删除数据集失败:",t),this.$message.error("删除数据集失败"))}},getImportStatusType(e){const t={pending:"info",processing:"warning",success:"success",failed:"danger"};return t[e]||"info"},getImportStatusText(e){const t={pending:"等待中",processing:"导入中",success:"导入成功",failed:"导入失败"};return t[e]||e},getPublishStatusType(e){const t={draft:"info",published:"success"};return t[e]||"info"},getPublishStatusText(e){const t={draft:"草稿",published:"已发布"};return t[e]||e}}},ge=(0,m.A)(he,[["render",oe],["__scopeId","data-v-5073aaa0"]]),be=ge,ke={class:"dataset-detail-container"},fe={class:"header-actions"},_e={class:"dataset-info"},ve={class:"dataset-actions"},Fe={class:"dataset-content"},ye={class:"dialog-footer"};function we(e,t,a,s,l,o){const i=(0,r.g2)("el-button"),d=(0,r.g2)("router-link"),n=(0,r.g2)("el-descriptions-item"),u=(0,r.g2)("el-tag"),c=(0,r.g2)("el-descriptions"),p=(0,r.g2)("el-table-column"),m=(0,r.g2)("el-table"),h=(0,r.g2)("el-pagination"),g=(0,r.g2)("el-upload"),b=(0,r.g2)("el-form-item"),f=(0,r.g2)("el-input"),_=(0,r.g2)("el-form"),v=(0,r.g2)("el-dialog");return(0,r.uX)(),(0,r.CE)("div",ke,[(0,r.Lk)("div",fe,[(0,r.Lk)("h2",null,(0,k.v_)(l.dataset.name),1),(0,r.bF)(d,{to:"/datasets"},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.eW)("返回")]))),_:1})])),_:1})]),(0,r.Lk)("div",_e,[(0,r.bF)(c,{title:"数据集信息",column:2,border:""},{default:(0,r.k6)((()=>[(0,r.bF)(n,{label:"数据集名称"},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(l.dataset.name),1)])),_:1}),(0,r.bF)(n,{label:"数据集类型"},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(l.dataset.type),1)])),_:1}),(0,r.bF)(n,{label:"最新版本"},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(l.dataset.version),1)])),_:1}),(0,r.bF)(n,{label:"数据量"},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(l.dataset.count),1)])),_:1}),(0,r.bF)(n,{label:"导入状态"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{type:o.getImportStatusType(l.dataset.import_status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(o.getImportStatusText(l.dataset.import_status)),1)])),_:1},8,["type"])])),_:1}),(0,r.bF)(n,{label:"发布状态"},{default:(0,r.k6)((()=>[(0,r.bF)(u,{type:o.getPublishStatusType(l.dataset.publish_status)},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(o.getPublishStatusText(l.dataset.publish_status)),1)])),_:1},8,["type"])])),_:1}),(0,r.bF)(n,{label:"创建时间"},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(l.dataset.created_at),1)])),_:1}),(0,r.bF)(n,{label:"更新时间"},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(l.dataset.updated_at),1)])),_:1}),(0,r.bF)(n,{label:"描述",span:2},{default:(0,r.k6)((()=>[(0,r.eW)((0,k.v_)(l.dataset.description),1)])),_:1})])),_:1})]),(0,r.Lk)("div",ve,[(0,r.bF)(i,{type:"primary",onClick:o.exportDataset},{default:(0,r.k6)((()=>t[4]||(t[4]=[(0,r.eW)("导出数据集")]))),_:1},8,["onClick"]),(0,r.bF)(i,{type:"success",onClick:o.publishDataset,disabled:"published"===l.dataset.publish_status},{default:(0,r.k6)((()=>t[5]||(t[5]=[(0,r.eW)("发布数据集")]))),_:1},8,["onClick","disabled"]),(0,r.bF)(i,{type:"warning",onClick:o.showUpdateDialog},{default:(0,r.k6)((()=>t[6]||(t[6]=[(0,r.eW)("更新数据集")]))),_:1},8,["onClick"]),(0,r.bF)(i,{type:"danger",onClick:o.deleteDataset},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.eW)("删除数据集")]))),_:1},8,["onClick"])]),(0,r.Lk)("div",Fe,[t[8]||(t[8]=(0,r.Lk)("h3",null,"数据集内容",-1)),(0,r.bF)(m,{data:l.datasetItems,style:{width:"100%"},height:"400",border:""},{default:(0,r.k6)((()=>[(0,r.bF)(p,{type:"index",width:"50"}),(0,r.bF)(p,{prop:"question",label:"问题",width:"300"}),(0,r.bF)(p,{prop:"answer",label:"标准答案"})])),_:1},8,["data"]),(0,r.bF)(h,{onCurrentChange:o.handleCurrentChange,"current-page":l.currentPage,"page-size":l.pageSize,layout:"prev, pager, next, total",total:l.totalItems},null,8,["onCurrentChange","current-page","page-size","total"])]),(0,r.bF)(v,{title:"更新数据集",modelValue:l.updateDialogVisible,"onUpdate:modelValue":t[2]||(t[2]=e=>l.updateDialogVisible=e),width:"50%"},{footer:(0,r.k6)((()=>[(0,r.Lk)("span",ye,[(0,r.bF)(i,{onClick:t[1]||(t[1]=e=>l.updateDialogVisible=!1)},{default:(0,r.k6)((()=>t[11]||(t[11]=[(0,r.eW)("取消")]))),_:1}),(0,r.bF)(i,{type:"primary",onClick:o.submitUpdateForm},{default:(0,r.k6)((()=>t[12]||(t[12]=[(0,r.eW)("确认更新")]))),_:1},8,["onClick"])])])),default:(0,r.k6)((()=>[(0,r.bF)(_,{model:l.updateForm,rules:l.updateRules,ref:"updateForm","label-width":"120px"},{default:(0,r.k6)((()=>[(0,r.bF)(b,{label:"上传新版本",prop:"file"},{default:(0,r.k6)((()=>[(0,r.bF)(g,{class:"upload-demo",action:"/api/datasets/upload/","on-success":o.handleUpdateUploadSuccess,"on-error":o.handleUpdateUploadError,"before-upload":o.beforeUpload,"file-list":l.updateFileList},{default:(0,r.k6)((()=>[(0,r.bF)(i,null,{default:(0,r.k6)((()=>t[9]||(t[9]=[(0,r.eW)("选择文件")]))),_:1})])),_:1},8,["on-success","on-error","before-upload","file-list"]),t[10]||(t[10]=(0,r.Lk)("div",{class:"upload-hint"},"支持Excel文件格式，文件大小不超过10MB",-1))])),_:1}),(0,r.bF)(b,{label:"版本说明",prop:"version_notes"},{default:(0,r.k6)((()=>[(0,r.bF)(f,{type:"textarea",modelValue:l.updateForm.version_notes,"onUpdate:modelValue":t[0]||(t[0]=e=>l.updateForm.version_notes=e),placeholder:"请输入版本说明",rows:3},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}const Ce={name:"DatasetDetail",data(){return{dataset:{id:1,name:"Zeugma",type:"评测集-文本生成",version:"V1",count:300,import_status:"success",publish_status:"published",created_at:"2025-02-09 22:00:00",updated_at:"2025-02-09 22:07:41",description:"这是一个用于评测大语言模型文本生成能力的数据集。"},datasetItems:[],currentPage:1,pageSize:10,totalItems:0,updateDialogVisible:!1,updateForm:{file:null,version_notes:""},updateRules:{file:[{required:!0,message:"请上传数据文件",trigger:"change"}],version_notes:[{required:!0,message:"请输入版本说明",trigger:"blur"},{max:200,message:"版本说明不能超过200个字符",trigger:"blur"}]},updateFileList:[]}},created(){this.fetchDatasetDetail(),this.fetchDatasetItems()},methods:{async fetchDatasetDetail(){},async fetchDatasetItems(){try{this.datasetItems=Array(10).fill().map(((e,t)=>({id:t+1,question:`示例问题 ${t+1}`,answer:`示例答案 ${t+1}`}))),this.totalItems=300}catch(e){console.error("获取数据集内容失败:",e),this.$message.error("获取数据集内容失败")}},handleCurrentChange(e){this.currentPage=e,this.fetchDatasetItems()},async exportDataset(){try{this.$message.success(`数据集 ${this.dataset.name} 导出成功`)}catch(e){console.error("导出数据集失败:",e),this.$message.error("导出数据集失败")}},async publishDataset(){try{this.$message.success(`数据集 ${this.dataset.name} 发布成功`),this.dataset.publish_status="published"}catch(e){console.error("发布数据集失败:",e),this.$message.error("发布数据集失败")}},async deleteDataset(){try{await this.$confirm("此操作将永久删除该数据集，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),this.$message.success(`数据集 ${this.dataset.name} 删除成功`),this.$router.push("/datasets")}catch(e){"cancel"!==e&&(console.error("删除数据集失败:",e),this.$message.error("删除数据集失败"))}},showUpdateDialog(){this.updateDialogVisible=!0},handleUpdateUploadSuccess(e,t){this.updateForm.file=e.file_path,this.$message.success("文件上传成功")},handleUpdateUploadError(){this.$message.error("文件上传失败")},beforeUpload(e){const t="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===e.type||"application/vnd.ms-excel"===e.type,a=e.size/1024/1024<10;return t?!!a||(this.$message.error("文件大小不能超过10MB!"),!1):(this.$message.error("只能上传Excel文件!"),!1)},submitUpdateForm(){this.$refs.updateForm.validate((async e=>{if(!e)return this.$message.error("请完成必填项"),!1;try{console.log("提交的更新表单数据:",this.updateForm),this.$message.success("数据集更新成功"),this.updateDialogVisible=!1,this.fetchDatasetDetail(),this.fetchDatasetItems()}catch(t){console.error("更新数据集失败:",t),this.$message.error("更新数据集失败: "+(t.response?.data?.message||t.message))}}))},getImportStatusType(e){const t={pending:"info",processing:"warning",success:"success",failed:"danger"};return t[e]||"info"},getImportStatusText(e){const t={pending:"等待中",processing:"导入中",success:"导入成功",failed:"导入失败"};return t[e]||e},getPublishStatusType(e){const t={draft:"info",published:"success"};return t[e]||"info"},getPublishStatusText(e){const t={draft:"草稿",published:"已发布"};return t[e]||e}}},De=(0,m.A)(Ce,[["render",we],["__scopeId","data-v-823c5024"]]),Ve=De,$e=[{path:"/",name:"Home",component:te},{path:"/tasks",name:"Tasks",component:te},{path:"/create-task",name:"CreateTask",component:X},{path:"/datasets",name:"Datasets",component:be},{path:"/datasets/:id",name:"DatasetDetail",component:Ve,props:!0}],Te=(0,b.aE)({history:(0,b.LA)(),routes:$e}),xe=Te;w().defaults.baseURL="http://localhost:8000";const We=(0,s.Ef)(g);We.use(l.A),We.use(xe),We.mount("#app")}},t={};function a(s){var l=t[s];if(void 0!==l)return l.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,a),r.exports}a.m=e,(()=>{var e=[];a.O=(t,s,l,r)=>{if(!s){var o=1/0;for(u=0;u<e.length;u++){for(var[s,l,r]=e[u],i=!0,d=0;d<s.length;d++)(!1&r||o>=r)&&Object.keys(a.O).every((e=>a.O[e](s[d])))?s.splice(d--,1):(i=!1,r<o&&(o=r));if(i){e.splice(u--,1);var n=l();void 0!==n&&(t=n)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[s,l,r]}})(),(()=>{a.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return a.d(t,{a:t}),t}})(),(()=>{a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}})(),(()=>{a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var l,r,[o,i,d]=s,n=0;if(o.some((t=>0!==e[t]))){for(l in i)a.o(i,l)&&(a.m[l]=i[l]);if(d)var u=d(a)}for(t&&t(s);n<o.length;n++)r=o[n],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(u)},s=self["webpackChunklmeval_frontend"]=self["webpackChunklmeval_frontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[504],(()=>a(4365)));s=a.O(s)})();
//# sourceMappingURL=app.js.map